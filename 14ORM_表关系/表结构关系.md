## 表关系  
- 单表
- 一对多
- 多对多
- 一对一

在10orm中写有这部分内容，现在做具体展开
## 1.一对多
### 看下面的实例  (一个部门下有多个user)
```python
from django.db import models

# Create your models here.

class Depart(models.Model):
    title = models.CharField(verbose_name='标题',max_length=32)
    class Meta:
        db_table = 'department'

class User(models.Model):
    name = models.CharField(verbose_name='姓名',max_length=32)
    dp = models.ForeignKey(to='Depart',to_field='id',verbose_name='部门',on_delete=models.CASCADE)
    # 这个和之前学的flask中的作用相似，譬如我们想通过user找到这个user对应的部门名称的时候   
    # 就可以user.dp.title ,这样跨表就拿到了我们想要的部门的名称
class Role(models.Model):
    title = models.CharField(verbose_name='标题',max_length=32)
```  
>on_delete=models.CASCADE 是级联删除,这样在删除数据的时候不会报外键的错


指定Meta的db_table就是指定我们自定义的表名,就跟之前在flask中的__tablename__ 指定自定义表名的效果是一样的   
这样设置之后,数据库中就是我们指定的名字而不是django自动生成的app名称_小写表名了  

```python
    class Meta:
        db_table = 'department' 
```



### 注意
使用`model.ForeignKey()的时候,指定to可以表示和哪个表进行关联   
也就是说让哪个表来当作当前表的外键的母表，to_field指的是指定的表中  
用哪个字段来作为外键约束,如果不指定的话就是用to的那个表的id作为约束   
注意!!因为django的models在我们使用表的时候会默认创建id,所以我们自己  
在建表的时候可以不用专门创建主键自增的id   

当然，如果实在想自己写的话就models.BigAutoField(primary_key=True)


## 2. 多对多  

### 一个用户可以买多件商品，一个商品也可以有多个用户    
````python
class User(models.Model):
    name = models.CharField(verbose_name='姓名',max_length=32)
    

class Goods(models.Model):
    goods_name = models.CharField(verbose_name='商品名称',max_length=32)


class Order(models.Model):
    gid = models.ForeignKey(to='Goods',to_field='id',verbose_name='商品id',on_delete=models.CASCADE)
    uid = models.ForeignKey(to='User',to_field='id',verbose_name='用户id',on_delete=models.CASCADE)
````

当然了，也可以用之前说过的manytomany
```python
class User(models.Model):
    name = models.CharField(verbose_name='姓名',max_length=32)
    
class Goods(models.Model):
    goods_name = models.CharField(verbose_name='商品名称',max_length=32)
    uid = models.ManyToManyField(to='User')
```

但还是那句话，最好别用manytomany


## 3.一对一   

譬如一个id只能注册一个博客   
```python

class User(models.Model):
    name = models.CharField(verbose_name='姓名',max_length=32)
    pwd = models.CharField(verbose_name='密码',max_length=32)

class Blog(models.Model):
    user = models.OneToOneField(to='User',on_delete=models.CASCADE)
    blog  = models.CharField(verbose_name='博客地址',max_length=255)
    summary = models.CharField(verbose_name='简介',max_length=128)

```

### 为什么使用数据库连接池  
