ä½ é‡åˆ°çš„è¿™ä¸ªé”™è¯¯æ˜¯ Django ä¸­å…³äº **URL å‘½åç©ºé—´ï¼ˆnamespaceï¼‰å’Œ `app_name`** çš„ä¸€ä¸ªç»å…¸é—®é¢˜ã€‚

---

## ğŸš¨ é”™è¯¯ä¿¡æ¯è§£è¯»

```text
django.core.exceptions.ImproperlyConfigured:
Specifying a namespace in include() without providing an app_name is not supported.
Set the app_name attribute in the included module, or pass a 2-tuple containing the list of patterns and app_name instead.
```

### ğŸ” ç¿»è¯‘ä¸€ä¸‹ï¼š
> ä½ åœ¨ä¸€ä¸ª `include()` ä¸­ä½¿ç”¨äº† `namespace='web'`ï¼Œä½†æ²¡æœ‰å‘Šè¯‰ Django è¿™ä¸ªè¢«åŒ…å«çš„ URL æ¨¡å—å¯¹åº”çš„ **åº”ç”¨åç§°ï¼ˆapp_nameï¼‰** æ˜¯ä»€ä¹ˆã€‚

Django ä¸çŸ¥é“è¿™ä¸ª `namespace` åº”è¯¥ç»‘å®šåˆ°å“ªä¸ª appï¼Œæ‰€ä»¥æŠ¥é”™ã€‚

---

## ğŸ“Œ é—®é¢˜ä»£ç 

```python
path('web/', include('apps.web.urls', namespace='web')),
```

ä½ åœ¨è¿™é‡ŒæŒ‡å®šäº† `namespace='web'`ï¼Œä½†æ²¡æœ‰æä¾› `app_name`ï¼ŒDjango ä¸çŸ¥é“ `apps.web` è¿™ä¸ª URL é…ç½®å±äºå“ªä¸ªåº”ç”¨ã€‚

---

## âœ… è§£å†³æ–¹æ³•ï¼šä¸¤ç§æ–¹å¼

### âœ… æ–¹æ³•ä¸€ï¼šåœ¨ `apps/web/urls.py` ä¸­è®¾ç½® `app_name`

è¿™æ˜¯æœ€æ¨èçš„æ–¹å¼ã€‚

#### ä¿®æ”¹ï¼š`apps/web/urls.py`

```python
from django.urls import path
from . import views

# è®¾ç½®åº”ç”¨åç§°
app_name = 'web'  # ğŸ‘ˆ å…³é”®ï¼šå®šä¹‰ app_name

urlpatterns = [
    path('login/', views.login, name='login'),
    path('index/', views.index, name='index'),
]
```

#### ä¿æŒä¸» `urls.py` ä¸å˜ï¼š

```python
path('web/', include('apps.web.urls', namespace='web')),
```

âœ… è¿™æ · Django å°±çŸ¥é“ï¼š`namespace='web'` å¯¹åº”çš„æ˜¯ `app_name='web'`ã€‚

---

### âœ… æ–¹æ³•äºŒï¼šåœ¨ `include()` ä¸­ä¼ å…¥ 2-tupleï¼ˆä¸æ¨èï¼Œå°‘è§ï¼‰

ä½ ä¹Ÿå¯ä»¥ä¸è®¾ç½® `app_name`ï¼Œè€Œæ˜¯æ‰‹åŠ¨ä¼ å…¥ä¸€ä¸ªå…ƒç»„ï¼š

```python
from django.urls import path, include

def web_urls():
    from apps.web import views
    return [
        path('login/', views.login, name='login'),
        path('index/', views.index, name='index'),
    ], 'web'  # ğŸ‘ˆ è¿”å› (urlpatterns, app_name)

# ä¸» urls.py
path('web/', include(web_urls, namespace='web')),
```

ä½†è¿™ç§æ–¹å¼å¯è¯»æ€§å·®ï¼Œç»´æŠ¤éº»çƒ¦ï¼Œ**ä¸€èˆ¬ä¸æ¨è**ã€‚

---

## ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦ `app_name`ï¼Ÿ

Django çš„ `{% url 'namespace:name' %}` åå‘è§£ææœºåˆ¶ä¾èµ–ä¸¤ä¸ªä¸œè¥¿ï¼š

1. **`namespace`**ï¼šä½ åœ¨ `include()` æ—¶æŒ‡å®šçš„ï¼ˆæ¯”å¦‚ `'web'`ï¼‰
2. **`app_name`**ï¼šåœ¨å­ `urls.py` ä¸­å®šä¹‰çš„ï¼ˆæ¯”å¦‚ `'web'`ï¼‰

åªæœ‰ä¸¤è€…åŒ¹é…ï¼ŒDjango æ‰èƒ½æ­£ç¡®è§£æï¼š

```django
<!-- æ¨¡æ¿ä¸­ -->
<a href="{% url 'web:login' %}">ç™»å½•</a>
```

å¦‚æœç¼ºå°‘ `app_name`ï¼ŒDjango å°±æ— æ³•å»ºç«‹å‘½åç©ºé—´æ˜ å°„ï¼Œå°±ä¼šæŠ¥é”™ã€‚

---

## âœ… éªŒè¯æ˜¯å¦æˆåŠŸ

å¯åŠ¨æœåŠ¡å™¨ï¼š

```bash
python manage.py runserver
```

å¦‚æœä¸å†æŠ¥é”™ï¼Œè¯´æ˜æˆåŠŸäº†ï¼

ä½ å¯ä»¥åœ¨æ¨¡æ¿ä¸­æµ‹è¯•ï¼š

```django
{% url 'web:login' %}
```

åº”è¯¥èƒ½æ­£ç¡®è§£æä¸º `/web/login/`ã€‚

---

## ğŸ“š æ€»ç»“

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| `namespace` ä½†æ²¡æœ‰ `app_name` | âŒ æŠ¥é”™ |
| âœ… æ­£ç¡®åšæ³• | åœ¨ `apps/web/urls.py` ä¸­æ·»åŠ  `app_name = 'web'` |
| âŒ é”™è¯¯åšæ³• | åªå†™ `namespace='web'`ï¼Œä¸è®¾ `app_name` |

---

ä½ å·²ç»éå¸¸æ¥è¿‘æ­£ç¡®ç­”æ¡ˆäº†ï¼Œåªæ˜¯æ¼æ‰äº† `app_name` è¿™ä¸ªå…³é”®é…ç½®ã€‚è¿™æ˜¯ Django é¡¹ç›®ç»“æ„åŒ–çš„é‡è¦ä¸€æ­¥ï¼Œä½ ç°åœ¨å·²ç»æŒæ¡äº†ï¼ğŸ‘

ç»§ç»­åŠ æ²¹ï¼Œä½ å¯¹ Django çš„ç†è§£è¶Šæ¥è¶Šæ·±å…¥äº†ï¼ğŸ’ªğŸš€


ä½ æå‡ºäº†ä¸€ä¸ªéå¸¸å…³é”®çš„é—®é¢˜ï¼ğŸ‘

> **â€œä¸ºä»€ä¹ˆè®¿é—® `/backend/login/` å’Œ `/web/login/` éƒ½æ˜¾ç¤ºçš„æ˜¯ `web` çš„é¡µé¢ï¼Ÿâ€**

æˆ‘ä»¬æ¥ä¸€æ­¥æ­¥åˆ†æï¼Œè¿™ä¸ªé—®é¢˜çš„æ ¸å¿ƒæ˜¯ï¼š

---

## ğŸ” é—®é¢˜æ ¹æºï¼š**Django æ‰¾æ¨¡æ¿æ˜¯æŒ‰è·¯å¾„æŸ¥æ‰¾çš„ï¼Œä¸æ˜¯æŒ‰åº”ç”¨éš”ç¦»çš„**

ä½ çš„ä¸¤ä¸ª `login` è§†å›¾éƒ½ç”¨äº†ï¼š

```python
return render(request, 'login.html')
```

è¿™æ„å‘³ç€ï¼š

- Django ä¼šå»é¡¹ç›®çš„ **æ‰€æœ‰æ¨¡æ¿ç›®å½•** ä¸­æ‰¾ `login.html`
- å®ƒæ‰¾åˆ°çš„ç¬¬ä¸€ä¸ª `login.html` å°±ä¼šè¢«ä½¿ç”¨
- **ä¸ä¼šåŒºåˆ†è¿™ä¸ªè§†å›¾æ¥è‡ªå“ªä¸ª app**

æ‰€ä»¥ï¼Œæ— è®ºä½ æ˜¯é€šè¿‡ `/web/login/` è¿˜æ˜¯ `/backend/login/` è®¿é—®ï¼Œåªè¦ `templates/login.html` å­˜åœ¨ï¼Œå°±ä¼šæ¸²æŸ“åŒä¸€ä¸ªæ–‡ä»¶ã€‚

---

## âœ… ä½†ä½ æœŸæœ›çš„æ˜¯ï¼š

| URL | åº”è¯¥æ˜¾ç¤ºçš„é¡µé¢ |
|-----|----------------|
| `/web/login/` | å‰å°ç™»å½•é¡µ |
| `/backend/login/` | åå°ç™»å½•é¡µ |

ä¹Ÿå°±æ˜¯è¯´ï¼š**è™½ç„¶è§†å›¾å‡½æ•°åç›¸åŒï¼Œä½†æ¨¡æ¿åº”è¯¥ä¸åŒã€‚**

---

## âœ… è§£å†³æ–¹æ¡ˆï¼š**ä¸ºä¸åŒåº”ç”¨çš„æ¨¡æ¿å»ºç«‹ç‹¬ç«‹ç›®å½•**

### âœ… æ­¥éª¤ 1ï¼šè°ƒæ•´æ¨¡æ¿ç›®å½•ç»“æ„

æŠŠæ¨¡æ¿æŒ‰åº”ç”¨åˆ†å¼€æ”¾ï¼š

```
project/
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ web/
â”‚   â”‚   â””â”€â”€ login.html          â† å‰å°ç™»å½•é¡µ
â”‚   â””â”€â”€ backend/
â”‚       â””â”€â”€ login.html          â† åå°ç™»å½•é¡µ
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/
â”‚   â””â”€â”€ backend/
```

### âœ… æ­¥éª¤ 2ï¼šä¿®æ”¹è§†å›¾ï¼ŒæŒ‡å®šæ¨¡æ¿è·¯å¾„

#### ä¿®æ”¹ `apps/web/views.py`

```python
def login(request):
    if request.method == 'POST':
        username = request.POST.get('username')
        password = request.POST.get('password')
        print("Web ç™»å½•:", username, password)
        return redirect(reverse('web:home'))
    return render(request, 'web/login.html')  # âœ… æ”¹æˆ 'web/login.html'
```

#### ä¿®æ”¹ `apps/backend/views.py`

```python
def login(request):
    if request.method == 'POST':
        username = request.POST.get('password')
        password = request.POST.get('password')
        print("Backend ç™»å½•:", username, password)
        return redirect(reverse('backend:home'))
    return render(request, 'backend/login.html')  # âœ… æ”¹æˆ 'backend/login.html'
```

---

## âœ… æ­¥éª¤ 3ï¼šç¡®ä¿ `settings.py` é…ç½®æ­£ç¡®

```python
# settings.py
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [BASE_DIR / 'templates'],  # ç¡®ä¿æŒ‡å‘ä½ çš„ templates ç›®å½•
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]
```

- `'DIRS': [BASE_DIR / 'templates']` æ˜¯å…³é”®ï¼Œå®ƒå‘Šè¯‰ Django å»è¿™é‡Œæ‰¾æ¨¡æ¿ã€‚

---

## âœ… åˆ›å»ºä¸åŒçš„ HTML æ¨¡æ¿

### `templates/web/login.html`

```html
<!DOCTYPE html>
<html>
<head><title>å‰å°ç™»å½•</title></head>
<body>
<h1>æ¬¢è¿æ¥åˆ° å‰å° ç™»å½•é¡µ</h1>
<form method="post">
    {% csrf_token %}
    <input type="text" name="username" placeholder="ç”¨æˆ·å"><br>
    <input type="password" name="password" placeholder="å¯†ç "><br>
    <button type="submit">ç™»å½•</button>
</form>
</body>
</html>
```

### `templates/backend/login.html`

```html
<!DOCTYPE html>
<html>
<head><title>åå°ç™»å½•</title></head>
<body style="background-color: #333; color: white;">
<h1>âš ï¸ æ¬¢è¿æ¥åˆ° åå° ç®¡ç†ç³»ç»Ÿ</h1>
<form method="post">
    {% csrf_token %}
    <input type="text" name="username" placeholder="ç®¡ç†å‘˜è´¦å·"><br>
    <input type="password" name="password" placeholder="å¯†ç "><br>
    <button type="submit">ç™»å½•</button>
</form>
</body>
</html>
```

---

## âœ… éªŒè¯ç»“æœ

| URL | æ˜¾ç¤ºå†…å®¹ | æ˜¯å¦æ­£ç¡® |
|-----|----------|---------|
| `http://127.0.0.1:8000/web/login/` | â€œæ¬¢è¿æ¥åˆ° å‰å° ç™»å½•é¡µâ€ | âœ… |
| `http://127.0.0.1:8000/backend/login/` | â€œâš ï¸ æ¬¢è¿æ¥åˆ° åå° ç®¡ç†ç³»ç»Ÿâ€ | âœ… |

ç°åœ¨å°±å¯¹äº†ï¼

---

## ğŸ§  ä¸ºä»€ä¹ˆä¹‹å‰â€œçœ‹èµ·æ¥ä¸€æ ·â€ï¼Ÿ

å› ä¸ºï¼š
- ä½ åªå†™äº†ä¸€ä¸ª `login.html`ï¼ˆæ¯”å¦‚æ”¾åœ¨ `templates/login.html`ï¼‰
- ä¸¤ä¸ªè§†å›¾éƒ½å¼•ç”¨äº†å®ƒ
- æ‰€ä»¥æ— è®ºå“ªä¸ª URLï¼Œæ‰“å¼€çš„éƒ½æ˜¯åŒä¸€ä¸ªé¡µé¢

è¿™ä¸æ˜¯è·¯ç”±æˆ–è§†å›¾çš„é—®é¢˜ï¼Œè€Œæ˜¯ **æ¨¡æ¿è·¯å¾„æ²¡æœ‰åŒºåˆ†**ã€‚

---

## âœ… æœ€ä½³å®è·µï¼šæ¨¡æ¿æŒ‰åº”ç”¨ç»„ç»‡

| æ¨èç»“æ„ | è¯´æ˜ |
|--------|------|
| `templates/app_name/template.html` | æ¸…æ™°ã€å¯ç»´æŠ¤ã€é¿å…å†²çª |
| ä½¿ç”¨ `{% extends 'base.html' %}` | å¯ä»¥å…±äº«å¸ƒå±€ï¼Œä½†å†…å®¹ä¸åŒ |

---

## âœ… é¢å¤–å»ºè®®ï¼šæ£€æŸ¥ `reverse()` æ˜¯å¦æ­£ç¡®

ä½ ç”¨äº†ï¼š

```python
return redirect(reverse('web:home'))
```

å’Œ

```python
return redirect(reverse('backend:home'))
```

ç¡®ä¿ `web/urls.py` å’Œ `backend/urls.py` éƒ½æœ‰ `home` è¿™ä¸ªå‘½å URLï¼š

```python
path('home/', views.home, name='home'),
```

å¦åˆ™ä¼šæŠ¥é”™ `NoReverseMatch`ã€‚

---

## âœ… æ€»ç»“

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|-----------|
| `/web/login/` å’Œ `/backend/login/` æ˜¾ç¤ºç›¸åŒé¡µé¢ | æ¨¡æ¿è·¯å¾„æœªåŒºåˆ†ï¼Œéƒ½ç”¨äº† `'login.html'` | æ”¹ä¸º `'web/login.html'` å’Œ `'backend/login.html'` |
| Django ä¸è‡ªåŠ¨éš”ç¦»æ¨¡æ¿ | æ¨¡æ¿æŸ¥æ‰¾æ˜¯å…¨å±€çš„ | æ‰‹åŠ¨ç”¨ç›®å½•ç»“æ„éš”ç¦» |

---

ä½ ç°åœ¨ä¸ä»…è§£å†³äº†é—®é¢˜ï¼Œè¿˜ç†è§£äº† Django æ¨¡æ¿æŸ¥æ‰¾æœºåˆ¶çš„æœ¬è´¨ï¼Œè¿™æ˜¯éå¸¸å®è´µçš„ï¼ğŸ‘

ç»§ç»­åŠ æ²¹ï¼Œä½ å·²ç»è¶Šæ¥è¶Šæ¥è¿‘ Django çš„é«˜çº§ç”¨æ³•äº†ï¼ğŸ’ªğŸš€